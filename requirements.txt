FYP Blockchain - System Requirements
=====================================

Last Updated: 2025-11-22
Branch: claude/clone-fyp-repo-01GcQmZnMbvkNkxehnggLCs3

╔════════════════════════════════════════════════════════════════╗
║              MASTER INSTALLATION AND TESTING SCRIPTS           ║
╚════════════════════════════════════════════════════════════════╝

QUICK START
===========

1. INSTALL ALL PREREQUISITES (One Command):
    ./install-prerequisites.sh

2. TEST EVERYTHING (One Command):
    ./test-all.sh --skip-crypto

See README_TESTING.md for complete guide.

AUTOMATED INSTALLATION
======================
Run this single command to install everything:
    ./install-prerequisites.sh

This installs:
- Docker & Docker Compose
- Go 1.25.4
- Node.js 20.x
- Hyperledger Fabric v2.5.14 binaries
- Fabric CA v1.5.15 binaries
- All tools (jq, tree, curl, wget, git, etc.)

COMPREHENSIVE TESTING
=====================
Test both hot and cold blockchains:

    # Quick test (recommended first)
    ./test-all.sh --skip-crypto

    # Full test with crypto generation
    ./test-all.sh

This validates:
- All prerequisites and tools
- Hot blockchain (4 CAs, 2 orgs)
- Cold blockchain (6 CAs, 3 orgs)
- MSP structures and NodeOUs
- TLS configurations
- Domain names (*.hot.coc.com / *.cold.coc.com)


Or manually install using the sections below.

CORE VERSIONS
=============
Hyperledger Fabric:     2.5.14 (LTS)
Fabric CA:              1.5.15
Go:                     1.25.4
Node.js:                20.x LTS (optional)
Docker Engine:          24.0+ (25.x recommended)
Docker Compose:         2.20+
CouchDB:                3.3.x
IPFS (Kubo):            0.29+ (optional)
Python:                 3.11+

SYSTEM REQUIREMENTS
===================
OS:                     64-bit Linux (Kali Linux / Debian recommended)
RAM:                    4GB minimum (8GB+ recommended)
Disk Space:             20GB free minimum
Network:                Internet connection required
Permissions:            sudo/root access required

APT PACKAGES (Debian/Ubuntu/Kali)
==================================
git
curl
wget
tar
unzip
jq
openssl
build-essential
tree
htop
python3
python3-pip
docker.io
docker-compose

DOCKER IMAGES REQUIRED
======================
hyperledger/fabric-peer:2.5.14
hyperledger/fabric-orderer:2.5.14
hyperledger/fabric-ca:1.5.15
hyperledger/fabric-tools:2.5.14
couchdb:3.3
ipfs/kubo:latest (optional)

FABRIC BINARIES (installed in ./bin/)
======================================
peer
orderer
configtxgen
configtxlator
osnadmin
fabric-ca-server
fabric-ca-client

INSTALLATION COMMANDS (Manual)
===============================

1. Update System
   -------------
   sudo apt update && sudo apt upgrade -y

2. Install Core Tools
   ------------------
   sudo apt install -y git curl wget tar unzip jq openssl build-essential tree htop python3 python3-pip

3. Install Docker
   --------------
   sudo apt install -y docker.io docker-compose
   sudo systemctl start docker
   sudo systemctl enable docker
   sudo usermod -aG docker $USER
   # Log out and back in after this

4. Install Go 1.25.4
   -----------------
   cd ~
   wget https://go.dev/dl/go1.25.4.linux-amd64.tar.gz
   sudo rm -rf /usr/local/go
   sudo tar -C /usr/local -xzf go1.25.4.linux-amd64.tar.gz
   echo 'export PATH=$PATH:/usr/local/go/bin' >> ~/.bashrc
   echo 'export PATH=$PATH:$HOME/go/bin' >> ~/.bashrc
   source ~/.bashrc
   rm go1.25.4.linux-amd64.tar.gz

5. Install Node.js 20.x (Optional)
   --------------------------------
   curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.40.0/install.sh | bash
   source ~/.bashrc
   nvm install 20
   nvm use 20
   nvm alias default 20

6. Install Fabric Binaries
   ------------------------
   cd ~/FYPBcoc
   curl -sSL https://raw.githubusercontent.com/hyperledger/fabric/main/scripts/install-fabric.sh | bash -s -- binary 2.5.14 1.5.15
   echo 'export PATH=$PATH:~/FYPBcoc/bin' >> ~/.bashrc
   source ~/.bashrc
   # Optional: sudo cp bin/* /usr/local/bin/

7. Pull Docker Images
   ------------------
   docker pull hyperledger/fabric-peer:2.5.14
   docker pull hyperledger/fabric-orderer:2.5.14
   docker pull hyperledger/fabric-ca:1.5.15
   docker pull hyperledger/fabric-tools:2.5.14
   docker pull couchdb:3.3
   docker pull ipfs/kubo:latest

VERIFICATION COMMANDS
=====================
docker --version
docker-compose --version
go version
node --version (if installed)
npm --version (if installed)
fabric-ca-client version
configtxgen --version
peer version
docker images | grep hyperledger

TESTING THE SETUP
=================

TEST SCRIPT FEATURES:
- Validates all required tools (Docker, Fabric binaries, jq, etc.)
- Checks configuration files existence and syntax
- Validates MSP directory structures (org-level and node-level)
- Verifies NodeOUs config.yaml files
- Tests TLS directory structures
- Validates docker-compose files
- Tests CA container health and API responsiveness
- Optionally runs crypto generation and validates output
- Tests configtx.yaml genesis block generation

# Test HOT BLOCKCHAIN (Active Investigation Chain)
cd ~/FYPBcoc/hot-blockchain

# Quick validation (no crypto generation) - RECOMMENDED FIRST
./scripts/test-ca-setup.sh --skip-crypto

# Full test (starts CAs and generates crypto material)
./scripts/test-ca-setup.sh

# Manual crypto generation (if CAs already running)
docker-compose -f docker-compose-ca.yaml up -d
sleep 15
./scripts/generate-crypto.sh

# Test COLD BLOCKCHAIN (Archival Chain)
cd ~/FYPBcoc/cold-blockchain

# Quick validation (no crypto generation) - RECOMMENDED FIRST
./scripts/test-ca-setup.sh --skip-crypto

# Full test (starts CAs and generates crypto material)
./scripts/test-ca-setup.sh

# Manual crypto generation (if CAs already running)
docker-compose -f docker-compose-ca.yaml up -d
sleep 15
./scripts/generate-crypto.sh

WHAT THE TESTS VALIDATE:
========================
1. Tool availability: Docker, docker-compose, fabric-ca-client, configtxgen, peer, jq, tree
2. Configuration files: configtx.yaml, docker-compose-ca.yaml, CA configs
3. MSP structure: Org-level MSPs with admincerts/, cacerts/, tlscacerts/
4. Node MSPs: Local MSPs for orderers and peers with all required directories
5. NodeOUs: config.yaml files with proper OU definitions
6. TLS structure: TLS directories for all nodes
7. CA health: Container status and API responsiveness
8. Crypto generation: Complete certificate and key generation
9. Genesis block: configtx.yaml validation

PROJECT STRUCTURE
=================
FYPBcoc/
├── bin/                          # Fabric binaries
├── hot-blockchain/               # HOT CHAIN (Active Investigation)
│   ├── ca-config/               # CA server configurations
│   │   ├── ordererorg-ca/
│   │   ├── ordererorg-tlsca/
│   │   ├── laborg-ca/
│   │   └── laborg-tlsca/
│   ├── crypto-config/           # Generated crypto material (gitignored)
│   ├── scripts/                 # Automation scripts
│   ├── chaincode/               # Hot chain chaincode
│   ├── configtx.yaml            # Hot chain configuration
│   └── docker-compose-ca.yaml   # Hot chain CAs
├── cold-blockchain/              # COLD CHAIN (Archival)
│   ├── ca-config/               # CA server configurations
│   │   ├── ordererorg-ca/
│   │   ├── ordererorg-tlsca/
│   │   ├── laborg-ca/
│   │   ├── laborg-tlsca/
│   │   ├── courtorg-ca/
│   │   └── courtorg-tlsca/
│   ├── crypto-config/           # Generated crypto material (gitignored)
│   ├── scripts/                 # Automation scripts
│   ├── chaincode/               # Cold chain chaincode
│   ├── configtx.yaml            # Cold chain configuration
│   └── docker-compose-ca.yaml   # Cold chain CAs
├── install-prerequisites.sh      # THIS AUTOMATED INSTALLER
├── requirements.md               # Detailed documentation
├── requirements.txt              # THIS FILE
└── .gitignore                    # Git ignore rules

CERTIFICATE AUTHORITIES
========================

HOT CHAIN (4 CAs - Active Investigation):
  OrdererOrg Identity CA:  localhost:7054  (ca-admin:ca-adminpw)
  OrdererOrg TLS CA:       localhost:8054  (tls-ca-admin:tlscapw)
  LabOrg Identity CA:      localhost:7055  (ca-admin:ca-adminpw)
  LabOrg TLS CA:           localhost:8055  (tls-ca-admin:tlscapw)

COLD CHAIN (6 CAs - Archival):
  OrdererOrg Identity CA:  localhost:7154  (ca-admin:ca-adminpw)
  OrdererOrg TLS CA:       localhost:8154  (tls-ca-admin:tlscapw)
  LabOrg Identity CA:      localhost:7155  (ca-admin:ca-adminpw)
  LabOrg TLS CA:           localhost:8155  (tls-ca-admin:tlscapw)
  CourtOrg Identity CA:    localhost:7156  (ca-admin:ca-adminpw)
  CourtOrg TLS CA:         localhost:8156  (tls-ca-admin:tlscapw)

IDENTITIES
==========

HOT CHAIN (*.hot.coc.com):
  OrdererOrg:
    - orderer.hot.coc.com (orderer)
    - orderer-admin@ordererorg.hot.coc.com (admin)
  LabOrg:
    - peer0.laborg.hot.coc.com (peer)
    - lab-admin@laborg.hot.coc.com (admin)
    - lab-gw@laborg.hot.coc.com (gateway client)

COLD CHAIN (*.cold.coc.com):
  OrdererOrg:
    - orderer.cold.coc.com (orderer)
    - orderer-admin@ordererorg.cold.coc.com (admin)
  LabOrg:
    - peer0.laborg.cold.coc.com (peer)
    - lab-admin@laborg.cold.coc.com (admin)
    - lab-gw@laborg.cold.coc.com (gateway client)
  CourtOrg:
    - peer0.courtorg.cold.coc.com (peer)
    - court-admin@courtorg.cold.coc.com (admin)

NETWORK TOPOLOGY
================

HOT BLOCKCHAIN (Active Investigation):
  - 1 Orderer node (orderer.hot.coc.com:7050)
  - 1 Peer node (peer0.laborg.hot.coc.com:7051)
  - Organizations: OrdererOrg, LabOrg
  - Endorsement: OR('LabOrgMSP.peer')

COLD BLOCKCHAIN (Archival):
  - 1 Orderer node (orderer.cold.coc.com:7150)
  - 2 Peer nodes:
    * peer0.laborg.cold.coc.com:8051
    * peer0.courtorg.cold.coc.com:9051
  - Organizations: OrdererOrg, LabOrg, CourtOrg
  - Endorsement: AND('LabOrgMSP.peer', 'CourtOrgMSP.peer')

TROUBLESHOOTING
===============
Issue: Docker permission denied
Fix:   sudo usermod -aG docker $USER
       # Then log out and back in, or run: newgrp docker

Issue: fabric-ca-client not found
Fix:   export PATH=$PATH:~/FYPBcoc/bin
       # Or: sudo cp ~/FYPBcoc/bin/* /usr/local/bin/

Issue: CA containers won't start
Fix:   docker-compose -f docker-compose-ca.yaml down
       docker-compose -f docker-compose-ca.yaml up -d
       docker-compose -f docker-compose-ca.yaml logs

Issue: go: command not found
Fix:   export PATH=$PATH:/usr/local/go/bin
       source ~/.bashrc

Issue: Network connection issues
Fix:   Check DNS: ping 8.8.8.8
       Check internet: ping github.com
       Configure proxy if needed

CLEANUP COMMANDS
================

# Stop HOT chain CA containers
cd ~/FYPBcoc/hot-blockchain
docker-compose -f docker-compose-ca.yaml down

# Stop COLD chain CA containers
cd ~/FYPBcoc/cold-blockchain
docker-compose -f docker-compose-ca.yaml down

# Remove generated crypto material
cd ~/FYPBcoc
rm -rf hot-blockchain/crypto-config/*
rm -rf cold-blockchain/crypto-config/*
rm -rf .fabric-ca-client/

# Remove all Docker containers
docker stop $(docker ps -aq)
docker rm $(docker ps -aq)

# Remove Fabric images
docker rmi $(docker images 'hyperledger/*' -q)

SUPPORT & DOCUMENTATION
=======================
Project Repository:     https://github.com/rae81/FYPBcoc
Development Branch:     claude/clone-fyp-repo-01GcQmZnMbvkNkxehnggLCs3
Fabric Documentation:   https://hyperledger-fabric.readthedocs.io/en/release-2.5/
Fabric CA Docs:         https://hyperledger-fabric-ca.readthedocs.io/
Requirements Doc:       requirements.md
Installation Script:    install-prerequisites.sh

NOTES
=====
- Project split into hot-blockchain/ and cold-blockchain/ directories
- Hot chain: Active investigation (*.hot.coc.com)
- Cold chain: Archival with court validation (*.cold.coc.com)
- All paths use absolute references: /home/user/FYPBcoc/
- Private keys and certificates are gitignored for security
- Only NodeOUs config.yaml templates are version controlled
- Run 'source ~/.bashrc' after installation to update PATH
- Log out/in required after adding user to docker group
- Test hot chain: cd hot-blockchain && ./scripts/test-ca-setup.sh --skip-crypto
- Test cold chain: cd cold-blockchain && ./scripts/test-ca-setup.sh --skip-crypto
- For production, pin all Docker images to specific versions
- Apply regular security updates to all system components
- Dynamic certificate generation using Fabric CA v1.5.15
